<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tracking For Spotify</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#121313" />
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}" />

    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/genre_tracking.css') }}">
</head>

<div class="side_panel" id="side_panel" onload="close_settings()">
    <div href="javascript:void(0)" class="close_settings_button" onclick="close_settings()">&#9776;</div>
    <div class="current_user" title="Open Spotify Account" onclick="window.open('{{user['external_urls']['spotify']}}')">
    {% if user['images'][1]['url'] != "None": %}
        <img class="user_profile" src="{{user['images'][1]['url']}}"></img>
    {% else: %}
        <ion-icon class="user_profile" id="empty_profile" name="person-outline"></ion-icon>
    {% endif %}

    {% if "display_name" in user: %}
        <div class="user_name">{{user["display_name"]}}</div>
    {% else: %}
        <div class="user_name">{{user["user_name"]}}</div>
    {% endif %}
    </div>

    <div class="page_locator_box">
        <div class="page_locator"  id="song_tracking" onclick="window.location.assign('/song-tracking');">Song Tracking</div>
        <div class="page_locator" id="artist_tracking" onclick="window.location.assign('/artist-tracking');">Artist Tracking</div>
        <div class="page_locator" id="genre_tracking">Genre Tracking</div>
        <div class="page_locator" id="tag_editor" onclick="window.location.assign('/tag-editor');">Tag Editor</div>
    </div>

    <button class="sign_out_button" onclick="sign_out()">Sign Out</button>
</div>

<div id="graph_holder"><div id="close_graph_button" onclick="close_graph()">x</div><canvas id="graph_canvas"></canvas></div>

<body>
    <header>
        <img class="spotify_logo" src="{{url_for('static', filename='imgs/logos/Spotify_Logo_RGB_Green.png')}}" onclick="open_spotify_website()" title="Open Spotify"></img>

        <button class="open_settings_button" onclick="open_settings()">&#9776;</button>
    </header>

    <div class="button_holder">
        <button class="time_selector" id="short_term" onclick="update_tracking(this)">Previous 4 Weeks</button>
        <button class="time_selector" id="medium_term" onclick="update_tracking(this)">Previous 6 Months</button>
        <button class="time_selector" id="long_term" onclick="update_tracking(this)">All Time</button>
    </div>

    <div id="graph_holder"><div id="close_graph_button" onclick="close_graph()">x</div><canvas id="graph_canvas"></canvas></div>

    <div id="table_body">
    </div>


    <footer>
        <div id="currently_playing_box" onload="get_currently_playing()">
            <img id="current_song_image" src=""></img>
            <div class="name_album_text_holder">
                <div id="current_song_name"></div>
                <div id="current_song_album"></div>
            </div>
            
        </div>

        <div class="filter_queue">
            <ion-icon name="funnel-outline"></ion-icon>
        </div>
    </footer>
</body>
</html>

<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet">
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script type=text/javascript src="{{url_for('static', filename='js/main.js')}}"></script>  
<script type=text/javascript src="{{url_for('static', filename='js/genre_tracking.js')}}"></script> 