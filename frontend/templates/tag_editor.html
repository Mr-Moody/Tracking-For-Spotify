<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tracking For Spotify</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#121313" />
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}" />

    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tag_editor.css') }}">

</head>

<div class="side_panel" id="side_panel" onload="close_settings()">
    <div href="javascript:void(0)" class="close_settings_button" onclick="close_settings()">&#9776;</div>
    <div class="current_user" title="Open Spotify Account" onclick="window.open('{{user['external_urls']['spotify']}}')">
    {% if user['images'][1]['url'] != "None": %}
        <img class="user_profile" src="{{user['images'][1]['url']}}"></img>
    {% else: %}
        <ion-icon class="user_profile" id="empty_profile" name="person-outline"></ion-icon>
    {% endif %}

    {% if "display_name" in user: %}
        <div class="user_name">{{user["display_name"]}}</div>
    {% else: %}
        <div class="user_name">{{user["user_name"]}}</div>
    {% endif %}
    </div>

    <div class="page_locator_box">
        <div class="page_locator"  id="song_tracking" onclick="window.location.assign('/song-tracking');">Song Tracking</div>
        <div class="page_locator" id="artist_tracking" onclick="window.location.assign('/artist-tracking');">Artist Tracking</div>
        <div class="page_locator" id="genre_tracking" onclick="window.location.assign('/genre-tracking');">Genre Tracking</div>
        <div class="page_locator" id="tag_editor">Tag Editor</div>
    </div>

    <button class="sign_out_button" onclick="sign_out()">Sign Out</button>
</div>

<div id="tag_menu">
    <!-- <div id="tag_menu_item" title="Edit Tag">Edit Tag</div> -->
    <div id="tag_menu_item" title="Delete Tag" onclick="delete_tag(); this.style.visibility='hidden'">Delete Tag</div>
</div>

<div class="alert" id="alert_box">
    <span class="close_alert_button" onclick="hide_alert_box()">&times;</span>
</div>

<body>
    <header>
        <img class="spotify_logo" src="{{url_for('static', filename='imgs/logos/Spotify_Logo_RGB_Green.png')}}" onclick="open_spotify_website()" title="Open Spotify"></img>

        <button class="open_settings_button" onclick="open_settings()">&#9776;</button>
    </header>


    <div class="tag_viewer">
        <h1 id="current_tag_title">Tags</h1>

        <div class="tag_list_holder" oncontextmenu="return false;">
            <ol id="user_current_tags"></ol>
            <div class="add_tag" onclick="show_tag_form()"><div class="add_tag_text">+</div></div>
        </div>

        <form id="tag_creator">
            <div class="title_holder">
                <div class="create_tag_title">Create New Tag</div>
                <div class="add_tag" onclick="hide_tag_form()"><div class="close_tag_creator" onclick="hide_tag_form()">&times;</div></div>
            </div>

            <div class="input_box">
                <input type="text" id="tag_name"required>
                <label for="">Tag Name</label>
            </div>

            <div class="input_box">
                <input type="text" id="tag_description"required>
                <label for="">Tag Description</label>
            </div>

            <div class="input_box">
                <input type="color" id="tag_colour" value="#1DB954" required>
                <label for="">Tag Colour</label>
            </div>

            <div id="submit_button" onclick="create_tag()">Create Tag</div>

        </form>
        
    </div>

    <footer>
        <div id="currently_playing_box" onload="get_currently_playing()">
            <img id="current_song_image" src=""></img>
            <div class="name_album_text_holder">
                <div id="current_song_name"></div>
                <div id="current_song_album"></div>
            </div>
            
        </div>

        <ol id="currently_selected_tags"></ol>

        <div class="filter_queue">
            
            <ion-icon name="funnel-outline"></ion-icon>
        </div>
    </footer>
</body>
</html>

<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet">
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script type=text/javascript src="{{url_for('static', filename='js/main.js')}}"></script>  
<script type=text/javascript src="{{url_for('static', filename='js/tag_editor.js')}}"></script> 